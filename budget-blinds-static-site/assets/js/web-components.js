/**
 * Budget Blinds - Web Components
 * Reusable custom elements for the Motorized Window Shades site
 */

// =============================
// <bb-header> Component
// =============================
class BBHeader extends HTMLElement {
  constructor() {
    super();
    this.mobileMenuOpen = false;
  }

  connectedCallback() {
    const logoText = this.getAttribute('logo') || 'Budget Blinds';
    const tagline = this.getAttribute('tagline') || 'Style and service for every budget.';
    const ctaText = this.getAttribute('cta-text') || 'Schedule a Consultation';
    const ctaHref = this.getAttribute('cta-href') || '#consultation';
    const location = this.getAttribute('location') || 'Strongsville';
    const phone = this.getAttribute('phone') || '(440) 299-6241';
    const franchiseHref = this.getAttribute('franchise-href') || '#franchise';
    
    // Get nav items from child elements or default
    const navItems = this.getNavItems();
    
    this.innerHTML = `
      <header class="header">
        <!-- Top Bar -->
        <div class="header__top">
          <div class="container">
            <div class="header__top-inner">
              <a href="${franchiseHref}" class="header__franchise-btn">Franchise Opportunities</a>
              
              <div class="header__logo-wrapper">
                <a href="/" class="logo-main" aria-label="${logoText} Home">
                  <svg width="201" height="75" viewBox="0 0 201 75" fill="none" xmlns="http://www.w3.org/2000/svg" class="logo-main__svg">
                    <path d="M188.357 2.82077C188.357 2.46818 188.428 2.11558 188.569 1.8335C188.71 1.55142 188.851 1.26935 189.133 1.05779C189.345 0.846229 189.627 0.634671 189.909 0.493632C190.191 0.352594 190.544 0.282074 190.896 0.282074C191.249 0.282074 191.601 0.352594 191.883 0.493632C192.165 0.634671 192.448 0.77571 192.659 1.05779C192.871 1.26935 193.082 1.55142 193.223 1.8335C193.364 2.11558 193.435 2.46818 193.435 2.82077C193.435 3.17337 193.364 3.52597 193.223 3.80805C193.082 4.09012 192.941 4.3722 192.659 4.58376C192.448 4.79532 192.165 5.00688 191.883 5.14791C191.601 5.28895 191.249 5.35947 190.896 5.35947C190.544 5.35947 190.191 5.28895 189.909 5.14791C189.627 5.00688 189.345 4.86584 189.133 4.58376C188.922 4.3722 188.71 4.09012 188.569 3.80805C188.428 3.52597 188.357 3.17337 188.357 2.82077ZM188.781 2.82077C188.781 3.10285 188.851 3.38493 188.922 3.59649C189.063 3.87857 189.204 4.09012 189.345 4.23116C189.556 4.44272 189.768 4.58376 189.979 4.65428C190.261 4.79532 190.473 4.79532 190.755 4.79532C191.037 4.79532 191.319 4.7248 191.531 4.65428C191.813 4.51324 192.024 4.3722 192.165 4.23116C192.377 4.0196 192.518 3.80805 192.589 3.59649C192.73 3.31441 192.73 3.10285 192.73 2.82077C192.73 2.5387 192.659 2.25662 192.589 2.04506C192.448 1.76298 192.307 1.55142 192.165 1.41038C191.954 1.19883 191.742 1.05779 191.531 0.987268C191.249 0.846229 191.037 0.84623 190.755 0.84623C190.473 0.84623 190.191 0.916749 189.979 0.987268C189.697 1.12831 189.486 1.26935 189.345 1.41038C189.133 1.62194 188.992 1.8335 188.922 2.04506C188.851 2.25662 188.781 2.5387 188.781 2.82077ZM189.909 1.33987H191.037C191.39 1.33987 191.672 1.41039 191.813 1.55142C191.954 1.69246 192.095 1.90402 192.095 2.1861C192.095 2.46818 192.024 2.60922 191.883 2.75025C191.742 2.89129 191.601 2.96181 191.39 2.96181L192.165 4.16064H191.601L190.896 2.96181H190.402V4.16064H189.838V1.33987H189.909ZM190.402 2.60922H190.755C190.826 2.60922 190.896 2.60922 190.967 2.60922C191.037 2.60922 191.108 2.60922 191.178 2.5387C191.249 2.5387 191.319 2.46818 191.319 2.39766C191.39 2.32714 191.39 2.25662 191.39 2.1861C191.39 2.11558 191.39 2.04506 191.319 1.97454C191.249 1.90402 191.249 1.90402 191.178 1.8335C191.108 1.8335 191.037 1.76298 190.967 1.76298C190.896 1.76298 190.826 1.76298 190.755 1.76298H190.402V2.60922Z" fill="#4A7D92"/>
                    <path d="M69.4613 16.7837C69.4613 20.0981 67.4162 23.0599 62.1978 23.0599H50.7031V0.634766H61.8452C66.9931 0.634766 68.8971 3.45554 68.8971 6.41736C68.8971 8.67398 67.6278 10.719 65.1596 11.3537C67.9804 11.9179 69.4613 13.8924 69.4613 16.7837ZM54.7227 3.80814V10.0844H61.0695C64.1018 10.0844 64.7365 8.46242 64.7365 6.911C64.7365 5.43009 63.9608 3.87866 61.0695 3.87866H54.7227V3.80814ZM65.3712 16.4311C65.3712 14.5271 64.2429 13.1167 61.6336 13.1167H54.7932V19.8161H61.4926C64.2429 19.8866 65.3712 18.4057 65.3712 16.4311Z" fill="#4A7D92"/>
                    <path d="M76.3018 0.634674V13.9628C76.3018 17.5593 78.4174 20.098 82.2255 20.098C85.963 20.098 88.1491 17.5593 88.1491 13.9628V0.634674H92.1687V14.2449C92.1687 19.816 88.5722 23.6945 82.2255 23.6945C75.8787 23.6945 72.2822 19.816 72.2822 14.2449V0.634674H76.3018Z" fill="#4A7D92"/>
                    <path d="M95.6953 0.634766H105.356C112.126 0.634766 116.569 4.79541 116.569 11.6358C116.569 18.4762 112.056 23.0599 105.356 23.0599H95.7658V0.634766H95.6953ZM105.074 19.7455C109.658 19.7455 112.267 16.4311 112.267 11.6358C112.267 6.84048 109.517 3.87866 104.933 3.87866H99.6444V19.675H105.074V19.7455Z" fill="#4A7D92"/>
                    <path d="M119.601 11.9178C119.601 4.93636 123.973 0 131.166 0C137.16 0 140.545 3.38493 141.391 7.05194L137.301 7.82766C136.737 5.50052 134.762 3.38493 131.095 3.38493C126.511 3.38493 123.761 6.76987 123.761 11.9178C123.761 16.9247 126.441 20.3801 131.095 20.3801C135.75 20.3801 137.795 17.1362 137.865 14.527V14.2449H130.813V11.0716H141.532V23.1304H138.218V19.4634C136.948 22.0021 134.198 23.765 130.249 23.765C123.691 23.6945 119.601 18.8287 119.601 11.9178Z" fill="#4A7D92"/>
                    <path d="M162.054 19.7454V23.0599H145.411V0.634674H161.842V3.94909H149.431V10.0138H161.349V13.1871H149.431V19.7454H162.054Z" fill="#4A7D92"/>
                    <path d="M185.043 4.09013H177.427V23.0599H173.478V4.09013H165.791V0.634674H185.043V4.09013Z" fill="#4A7D92"/>
                    <path d="M69.4613 46.6839C69.4613 49.9983 67.4162 52.9601 62.1978 52.9601H50.7031V30.5349H61.8452C66.9931 30.5349 68.8971 33.3557 68.8971 36.3175C68.8971 38.5741 67.6278 40.6192 65.1596 41.2539C67.9804 41.818 69.4613 43.7926 69.4613 46.6839ZM54.7227 33.7788V40.055H61.0695C64.1018 40.055 64.7365 38.4331 64.7365 36.8817C64.7365 35.4008 63.9608 33.8493 61.0695 33.8493H54.7227V33.7788ZM65.3712 46.3313C65.3712 44.4272 64.2429 43.0169 61.6336 43.0169H54.7932V49.7162H61.4926C64.2429 49.7867 65.3712 48.3058 65.3712 46.3313Z" fill="#4A7D92"/>
                    <path d="M72.917 30.5349H76.9366V49.4341H88.6428V52.9601H72.917V30.5349Z" fill="#4A7D92"/>
                    <path d="M33.9902 24.2587H9.02637V0.634674H38.2214V20.0275C38.1509 22.3547 36.2469 24.2587 33.9902 24.2587Z" fill="#4A7D92"/>
                    <path d="M38.1509 52.9601H9.02637V28.2783H34.2723C36.4584 28.2783 38.2214 30.0413 38.2214 32.2274V52.9601H38.1509Z" fill="#4A7D92"/>
                    <path d="M4.72469 0.634674H0.705078V52.9601H4.72469V0.634674Z" fill="#4A7D92"/>
                    <path d="M96.1182 30.5349H92.0986V52.9601H96.1182V30.5349Z" fill="#4A7D92"/>
                    <path d="M100.49 30.5349H105.074L115.229 45.344C115.793 46.2607 116.287 47.107 116.639 47.9532H116.71C116.71 47.0365 116.71 46.1197 116.71 45.0619V30.5349H120.377V52.9601H116.005L105.638 38.01C105.074 37.0932 104.58 36.247 104.298 35.4713H104.228C104.228 36.3175 104.228 37.2343 104.228 38.3626V53.0306H100.561V30.5349H100.49Z" fill="#4A7D92"/>
                    <path d="M124.679 30.5349H134.34C141.11 30.5349 145.552 34.6956 145.552 41.5359C145.552 48.3763 141.039 52.9601 134.34 52.9601H124.749V30.5349H124.679ZM134.058 49.6457C138.642 49.6457 141.251 46.3313 141.251 41.5359C141.251 36.7406 138.501 33.7788 133.917 33.7788H128.628V49.5752H134.058V49.6457Z" fill="#4A7D92"/>
                    <path d="M147.456 47.107L150.841 45.485C151.899 48.3058 154.226 50.2804 158.175 50.2804C161.348 50.2804 163.323 49.2931 163.323 46.966C163.323 44.8504 162.054 44.0746 159.374 43.6515L154.931 43.0169C150.982 42.3822 148.725 40.4076 148.725 36.5996C148.725 32.5095 152.04 29.9708 157.681 29.9708C162.477 29.9708 165.932 31.8043 167.343 35.6123L164.169 37.3753C163.182 34.6956 160.996 33.2147 157.47 33.2147C154.437 33.2147 152.674 34.343 152.674 36.247C152.674 38.0805 153.732 38.9267 156.412 39.4204L160.784 40.1256C165.086 40.8308 167.413 42.5937 167.413 46.5428C167.413 50.774 164.169 53.5948 158.104 53.5948C152.322 53.5948 148.725 51.1266 147.456 47.107Z" fill="#4A7D92"/>
                    <path d="M0 69.8847L1.41039 69.2501C1.69247 70.2373 2.46818 71.0836 3.87857 71.0836C4.79532 71.0836 5.64155 70.731 5.64155 69.7437C5.64155 68.8975 5.0774 68.5449 4.09013 68.3333L2.82078 68.1218C1.41039 67.8397 0.493636 67.064 0.493636 65.5125C0.493636 63.9611 1.76299 62.9033 3.80805 62.9033C5.50052 62.9033 6.9109 63.6085 7.2635 65.0894L5.92363 65.7946C5.64155 64.7368 4.86584 64.1727 3.66701 64.1727C2.67974 64.1727 2.04506 64.5958 2.04506 65.3715C2.04506 66.0767 2.46818 66.4998 3.45545 66.7114L4.79532 66.9934C6.27623 67.2755 7.2635 67.9807 7.2635 69.6027C7.2635 71.1541 6.06467 72.3529 3.80805 72.3529C1.69247 72.3529 0.352597 71.2951 0 69.8847Z" fill="#696A6E"/>
                    <path d="M7.68652 65.7946H8.81483V64.1727L10.3663 63.538V65.7946H11.9177V66.923H10.3663V69.9553C10.3663 70.6605 10.6483 70.9426 11.283 70.9426C11.5651 70.9426 11.7061 70.872 11.9177 70.872V72.1414C11.5651 72.2119 11.283 72.2824 10.8599 72.2824C9.30847 72.2824 8.81483 71.5067 8.81483 70.2374V66.9935H7.68652V65.7946Z" fill="#696A6E"/>
                    <path d="M12.9055 74.6096V73.4108C13.1171 73.4813 13.2581 73.4813 13.4697 73.4813C14.1749 73.4813 14.598 73.1992 14.8096 72.494L14.9506 72.1414L12.4824 65.7947H14.1044L15.5148 69.9553C15.5853 70.2374 15.6558 70.5195 15.7263 70.731C15.7263 70.5195 15.7968 70.3079 15.9379 69.9553L17.2072 65.7947H18.7587L16.361 72.494C15.7968 74.116 14.9506 74.6801 13.6107 74.6801C13.3992 74.6801 13.1876 74.6801 12.9055 74.6096Z" fill="#696A6E"/>
                    <path d="M21.3678 72.1414H19.8164V62.9739H21.3678V72.1414Z" fill="#696A6E"/>
                    <path d="M28.7017 69.3911H24.259C24.259 70.4489 24.9642 71.1541 25.9515 71.1541C26.6567 71.1541 27.2208 70.8015 27.5029 70.0963L28.7017 70.6605C28.2081 71.7888 27.2208 72.3529 25.9515 72.3529C23.9769 72.3529 22.8486 71.1541 22.8486 69.1091C22.8486 66.9935 23.9769 65.7241 25.881 65.7241C27.7145 65.7241 28.7723 66.7819 28.7723 68.7565V69.3911H28.7017ZM27.2208 68.2628C27.2208 67.205 26.7272 66.7114 25.8104 66.7114C24.8232 66.7114 24.3295 67.3461 24.259 68.4039H27.2208V68.2628Z" fill="#696A6E"/>
                    <path d="M32.7207 70.449C32.7207 69.8143 33.0028 69.3206 33.4964 69.0386C33.9195 68.7565 34.5542 68.6155 35.5415 68.4744L36.8813 68.3334V68.1923C36.8813 67.2756 36.5288 66.8525 35.6825 66.8525C34.9068 66.8525 34.4837 67.2756 34.4132 67.9808H32.8617C32.9323 66.6409 34.0606 65.7947 35.6825 65.7947C37.5865 65.7947 38.3623 66.5704 38.3623 68.4039V70.3079C38.3623 71.1542 38.4328 71.8593 38.5738 72.2825H37.0224C36.9519 72.0004 36.9519 71.5773 36.9519 71.2247C36.6698 72.0004 35.8236 72.494 34.8363 72.494C33.5669 72.2825 32.7207 71.5773 32.7207 70.449ZM36.8813 69.5322V69.1091L35.471 69.3206C34.6247 69.4617 34.2721 69.7438 34.2721 70.3079C34.2721 70.8721 34.6952 71.1542 35.3299 71.1542C36.2467 71.2247 36.8813 70.59 36.8813 69.5322Z" fill="#696A6E"/>
                    <path d="M40.1963 65.7946H41.6067V66.9935C42.0298 66.0767 42.735 65.5831 43.7223 65.5831C45.1326 65.5831 45.8378 66.4293 45.8378 68.1218V72.0709H44.2864V68.2628C44.2864 67.2755 43.8633 66.7819 43.0876 66.7819C42.1708 66.7819 41.6772 67.4871 41.6772 68.6859V72.0709H40.1963V65.7946Z" fill="#696A6E"/>
                    <path d="M47.0361 69.0385C47.0361 67.064 48.0939 65.7241 49.7159 65.7241C50.5621 65.7241 51.1968 66.0767 51.5494 66.7819V62.9739H53.1008V72.1414H51.6904V71.0131C51.3378 71.8593 50.6326 72.2824 49.6454 72.2824C48.0939 72.2824 47.0361 71.0131 47.0361 69.0385ZM51.6199 69.1796V68.7565C51.6199 67.4871 51.0557 66.7819 50.139 66.7819C49.2222 66.7819 48.6581 67.5576 48.6581 68.8975C48.6581 70.2374 49.2222 71.0836 50.139 71.0836C51.0557 71.1541 51.6199 70.3784 51.6199 69.1796Z" fill="#696A6E"/>
                    <path d="M57.5439 70.5899L58.6723 70.0963C58.9543 70.8015 59.589 71.2246 60.5058 71.2246C61.2815 71.2246 61.7046 70.872 61.7046 70.4489C61.7046 70.0258 61.4225 69.8142 60.7878 69.7437L59.6595 69.5321C58.4607 69.2501 57.826 68.6154 57.826 67.6281C57.826 66.4998 58.8133 65.6536 60.4352 65.6536C61.7751 65.6536 62.8329 66.2177 63.115 67.1345L62.0572 67.6986C61.7751 67.1345 61.211 66.7819 60.3647 66.7819C59.6595 66.7819 59.2364 67.064 59.2364 67.5576C59.2364 67.9807 59.5185 68.1923 60.0826 68.2628L61.352 68.4743C62.5508 68.6859 63.115 69.3206 63.115 70.3078C63.115 71.5067 62.1982 72.2824 60.5058 72.2824C59.0249 72.2824 57.9671 71.7182 57.5439 70.5899Z" fill="#696A6E"/>
                    <path d="M69.8844 69.3911H65.4416C65.4416 70.4489 66.1468 71.1541 67.1341 71.1541C67.8393 71.1541 68.4035 70.8015 68.6855 70.0963L69.8844 70.6605C69.3907 71.7888 68.4035 72.3529 67.1341 72.3529C65.1596 72.3529 64.0312 71.1541 64.0312 69.1091C64.0312 66.9935 65.1596 65.7241 67.0636 65.7241C68.8971 65.7241 69.9549 66.7819 69.9549 68.7565V69.3911H69.8844ZM68.4035 68.2628C68.4035 67.205 67.9098 66.7114 66.9931 66.7114C66.0058 66.7114 65.5122 67.3461 65.4416 68.4039H68.4035V68.2628Z" fill="#696A6E"/>
                    <path d="M74.7504 65.6536C74.8209 65.6536 74.8914 65.6536 74.9619 65.6536V67.1345C74.8914 67.1345 74.8209 67.1345 74.7504 67.1345C74.1157 67.1345 73.6926 67.346 73.4105 67.5576C72.9169 68.0512 72.8464 68.7564 72.8464 69.4616V72.1414H71.2949V65.7946H72.7053V67.346C73.0579 66.3588 73.6926 65.6536 74.7504 65.6536Z" fill="#696A6E"/>
                    <path d="M75.3857 65.7947H77.0077L78.277 69.8143C78.3476 70.1669 78.4886 70.449 78.4886 70.731H78.5591C78.6296 70.449 78.7002 70.0964 78.7707 69.8143L79.9695 65.7947H81.5914L79.3348 72.1414H77.7129L75.3857 65.7947Z" fill="#696A6E"/>
                    <path d="M82.4375 63.1853H84.0594V64.7367H82.4375V63.1853ZM82.508 65.7945H84.0594V72.1413H82.508V65.7945Z" fill="#696A6E"/>
                    <path d="M85.3994 68.968C85.3994 66.9229 86.5982 65.6536 88.5023 65.6536C90.0537 65.6536 91.1115 66.4998 91.323 67.9102L89.8421 68.1217C89.7716 67.2755 89.278 66.7819 88.5023 66.7819C87.5855 66.7819 86.9508 67.5576 86.9508 68.8975C86.9508 70.2373 87.515 71.0836 88.5023 71.0836C89.278 71.0836 89.7011 70.5899 89.8421 69.7437L91.2525 70.0258C91.041 71.4362 89.9832 72.2824 88.4317 72.2824C86.6688 72.2824 85.3994 71.013 85.3994 68.968Z" fill="#696A6E"/>
                    <path d="M98.0924 69.3911H93.6496C93.6496 70.4489 94.3548 71.1541 95.3421 71.1541C96.0473 71.1541 96.6115 70.8015 96.8935 70.0963L98.0924 70.6605C97.5987 71.7888 96.6115 72.3529 95.3421 72.3529C93.3676 72.3529 92.2393 71.1541 92.2393 69.1091C92.2393 66.9935 93.3676 65.7241 95.2716 65.7241C97.1051 65.7241 98.1629 66.7819 98.1629 68.7565V69.3911H98.0924ZM96.6115 68.2628C96.6115 67.205 96.1178 66.7114 95.2011 66.7114C94.2138 66.7114 93.7202 67.3461 93.6496 68.4039H96.6115V68.2628Z" fill="#696A6E"/>
                    <path d="M105.991 66.9229H104.439V72.1414H102.958V66.9229H101.9V65.7946H102.958V64.9484C102.958 63.6085 103.734 62.8328 105.144 62.8328C105.426 62.8328 105.779 62.9033 106.061 62.9033V64.1022C105.849 64.0317 105.638 64.0317 105.426 64.0317C104.792 64.0317 104.51 64.3843 104.51 65.0189V65.7241H106.061V66.9229H105.991Z" fill="#696A6E"/>
                    <path d="M106.484 68.968C106.484 66.8524 107.754 65.6536 109.587 65.6536C111.421 65.6536 112.69 66.8524 112.69 68.968C112.69 71.0836 111.421 72.2824 109.587 72.2824C107.754 72.2824 106.484 71.0836 106.484 68.968ZM111.139 68.968C111.139 67.5576 110.574 66.7819 109.587 66.7819C108.6 66.7819 108.036 67.4871 108.036 68.968C108.036 70.3784 108.6 71.1541 109.587 71.1541C110.574 71.1541 111.139 70.4489 111.139 68.968Z" fill="#696A6E"/>
                    <path d="M117.486 65.6536C117.556 65.6536 117.627 65.6536 117.697 65.6536V67.1345C117.627 67.1345 117.556 67.1345 117.486 67.1345C116.851 67.1345 116.428 67.346 116.146 67.5576C115.652 68.0512 115.582 68.7564 115.582 69.4616V72.1414H114.03V65.7946H115.441V67.346C115.793 66.3588 116.498 65.6536 117.486 65.6536Z" fill="#696A6E"/>
                    <path d="M127.358 69.3911H122.915C122.915 70.4489 123.62 71.1541 124.608 71.1541C125.313 71.1541 125.877 70.8015 126.159 70.0963L127.358 70.6605C126.864 71.7888 125.877 72.3529 124.608 72.3529C122.633 72.3529 121.505 71.1541 121.505 69.1091C121.505 66.9935 122.633 65.7241 124.537 65.7241C126.371 65.7241 127.429 66.7819 127.429 68.7565V69.3911H127.358ZM125.807 68.2628C125.807 67.205 125.313 66.7114 124.396 66.7114C123.409 66.7114 122.915 67.3461 122.845 68.4039H125.807V68.2628Z" fill="#696A6E"/>
                    <path d="M127.711 65.7946H129.333L130.602 69.8142C130.673 70.1668 130.814 70.4489 130.814 70.731H130.884C130.955 70.4489 131.025 70.0963 131.096 69.8142L132.295 65.7946H133.917L131.66 72.1414H130.038L127.711 65.7946Z" fill="#696A6E"/>
                    <path d="M140.122 69.3911H135.679C135.679 70.4489 136.384 71.1541 137.371 71.1541C138.077 71.1541 138.641 70.8015 138.923 70.0963L140.122 70.6605C139.628 71.7888 138.641 72.3529 137.371 72.3529C135.397 72.3529 134.269 71.1541 134.269 69.1091C134.269 66.9935 135.397 65.7241 137.301 65.7241C139.134 65.7241 140.192 66.7819 140.192 68.7565V69.3911H140.122ZM138.641 68.2628C138.641 67.205 138.147 66.7114 137.23 66.7114C136.243 66.7114 135.749 67.3461 135.679 68.4039H138.641V68.2628Z" fill="#696A6E"/>
                    <path d="M144.988 65.6536C145.058 65.6536 145.129 65.6536 145.199 65.6536V67.1345C145.129 67.1345 145.058 67.1345 144.988 67.1345C144.353 67.1345 143.93 67.346 143.648 67.5576C143.154 68.0512 143.084 68.7564 143.084 69.4616V72.1414H141.532V65.7946H142.943V67.346C143.295 66.3588 144 65.6536 144.988 65.6536Z" fill="#696A6E"/>
                    <path d="M146.116 74.6096V73.4108C146.328 73.4813 146.469 73.4813 146.681 73.4813C147.386 73.4813 147.809 73.1992 148.02 72.494L148.162 72.1414L145.693 65.8652H147.386L148.796 70.0258C148.867 70.3079 148.937 70.59 149.008 70.8015C149.008 70.59 149.078 70.3784 149.219 70.0258L150.489 65.8652H152.04L149.642 72.5645C149.078 74.1865 148.232 74.7506 146.892 74.7506C146.61 74.6801 146.328 74.6801 146.116 74.6096Z" fill="#696A6E"/>
                    <path d="M157.54 71.1541L157.399 72.2119H156.13V62.9739H157.681V66.7819C158.034 66.1473 158.669 65.6536 159.656 65.6536C161.207 65.6536 162.195 66.9935 162.195 68.968C162.195 70.9426 161.137 72.2824 159.585 72.2824C158.598 72.2824 157.893 71.8593 157.54 71.1541ZM160.573 68.968C160.573 67.6282 160.008 66.7819 159.092 66.7819C158.175 66.7819 157.681 67.5576 157.681 68.7565V69.1796C157.681 70.3784 158.245 71.0836 159.092 71.0836C160.008 71.1541 160.573 70.3079 160.573 68.968Z" fill="#696A6E"/>
                    <path d="M163.323 69.8848V65.7946H164.875V69.6027C164.875 70.5194 165.227 71.0131 166.003 71.0131C166.849 71.0131 167.413 70.3079 167.413 69.2501V65.7241H168.965V72.0709H167.554V70.872C167.272 71.6478 166.497 72.2119 165.58 72.2119C163.958 72.2824 163.323 71.3657 163.323 69.8848Z" fill="#696A6E"/>
                    <path d="M170.305 69.0385C170.305 67.064 171.362 65.7241 172.984 65.7241C173.831 65.7241 174.465 66.0767 174.818 66.7819V62.9739H176.369V72.1414H174.959V71.0131C174.606 71.8593 173.901 72.2824 172.914 72.2824C171.292 72.2824 170.305 71.0131 170.305 69.0385ZM174.818 69.1796V68.7565C174.818 67.4871 174.254 66.7819 173.337 66.7819C172.42 66.7819 171.856 67.5576 171.856 68.8975C171.856 70.2374 172.42 71.0836 173.337 71.0836C174.254 71.1541 174.818 70.3784 174.818 69.1796Z" fill="#696A6E"/>
                    <path d="M182.645 66.2883C183.068 66.6409 183.35 67.205 183.35 67.8397C183.35 69.109 182.363 70.0258 180.741 70.0258C180.247 70.0258 179.824 69.9553 179.472 69.8142C179.26 69.8847 179.19 70.0963 179.19 70.3079C179.19 70.6605 179.472 70.872 180.177 70.872H181.869C183.35 70.872 184.126 71.5067 184.126 72.7055C184.126 74.0454 182.998 74.8916 180.741 74.8916C178.555 74.8916 177.779 74.1864 177.779 73.2697C177.779 72.7055 178.132 72.2824 178.837 72.0003C178.273 71.7888 178.061 71.3657 178.061 70.872C178.061 70.2373 178.414 69.7437 179.049 69.5322C178.555 69.109 178.273 68.5449 178.273 67.9102C178.273 66.6409 179.26 65.7946 180.882 65.7946C181.376 65.7946 181.869 65.8651 182.222 66.0767C182.434 65.3715 182.998 64.8779 183.914 64.8779C184.056 64.8779 184.126 64.8779 184.267 64.9484V66.0767C184.126 66.0062 183.914 66.0062 183.773 66.0062C183.139 65.8651 182.857 66.0062 182.645 66.2883ZM179.895 72.1414C179.683 72.1414 179.542 72.1414 179.331 72.1414C179.049 72.3529 178.908 72.635 178.908 72.9171C178.908 73.6223 179.613 73.8338 180.741 73.8338C182.151 73.8338 182.645 73.4107 182.645 72.9171C182.645 72.4234 182.293 72.1414 181.587 72.1414H179.895ZM181.869 67.8397C181.869 67.1345 181.446 66.6409 180.671 66.6409C179.965 66.6409 179.472 67.1345 179.472 67.8397C179.472 68.5449 179.895 69.109 180.671 69.109C181.446 69.0385 181.869 68.5449 181.869 67.8397Z" fill="#696A6E"/>
                    <path d="M190.332 69.3911H185.889C185.889 70.4489 186.594 71.1541 187.581 71.1541C188.287 71.1541 188.851 70.8015 189.133 70.0963L190.332 70.6605C189.838 71.7888 188.851 72.3529 187.581 72.3529C185.607 72.3529 184.479 71.1541 184.479 69.1091C184.479 66.9935 185.607 65.7241 187.511 65.7241C189.344 65.7241 190.402 66.7819 190.402 68.7565V69.3911H190.332ZM188.851 68.2628C188.851 67.205 188.357 66.7114 187.44 66.7114C186.453 66.7114 185.959 67.3461 185.889 68.4039H188.851V68.2628Z" fill="#696A6E"/>
                    <path d="M190.896 65.7947H192.025V64.1728L193.576 63.5381V65.7947H195.128V66.923H193.576V69.9554C193.576 70.6605 193.858 70.9426 194.493 70.9426C194.775 70.9426 194.916 70.8721 195.128 70.8721V72.1415C194.775 72.212 194.493 72.2825 194.07 72.2825C192.518 72.2825 192.025 71.5068 192.025 70.2374V66.9935H190.896V65.7947Z" fill="#696A6E"/>
                    <path d="M198.019 72.1414H196.186V70.3784H198.019V72.1414Z" fill="#696A6E"/>
                    <path d="M197.948 64.1727C197.948 63.9611 198.019 63.8201 198.089 63.6085C198.16 63.4675 198.23 63.3264 198.371 63.1854C198.512 63.0444 198.653 62.9738 198.794 62.9033C198.936 62.8328 199.147 62.7623 199.359 62.7623C199.57 62.7623 199.711 62.8328 199.923 62.9033C200.064 62.9738 200.205 63.0444 200.346 63.1854C200.487 63.3264 200.557 63.4675 200.628 63.6085C200.698 63.7495 200.769 63.9611 200.769 64.1727C200.769 64.3842 200.698 64.5253 200.628 64.7368C200.557 64.8779 200.487 65.0189 200.346 65.1599C200.205 65.301 200.064 65.3715 199.923 65.442C199.782 65.5125 199.57 65.583 199.359 65.583C199.147 65.583 199.006 65.5125 198.794 65.442C198.653 65.3715 198.512 65.301 198.371 65.1599C198.23 65.0189 198.16 64.8779 198.089 64.7368C198.019 64.5253 197.948 64.3137 197.948 64.1727ZM198.23 64.1727C198.23 64.3137 198.23 64.4547 198.301 64.5958C198.371 64.7368 198.442 64.8779 198.512 64.9484C198.583 65.0189 198.724 65.1599 198.865 65.1599C199.006 65.2304 199.147 65.2304 199.288 65.2304C199.429 65.2304 199.57 65.2304 199.711 65.1599C199.852 65.0894 199.993 65.0189 200.064 64.9484C200.134 64.8779 200.275 64.7368 200.275 64.5958C200.346 64.4547 200.346 64.3137 200.346 64.1727C200.346 64.0316 200.346 63.8906 200.275 63.7495C200.205 63.6085 200.134 63.4675 200.064 63.3969C199.993 63.3264 199.852 63.1854 199.711 63.1854C199.57 63.1149 199.429 63.1149 199.288 63.1149C199.147 63.1149 199.006 63.1149 198.865 63.1854C198.724 63.2559 198.583 63.3264 198.512 63.3969C198.442 63.4675 198.301 63.6085 198.301 63.7495C198.23 63.8201 198.23 63.9611 198.23 64.1727ZM198.865 63.3264H199.5C199.711 63.3264 199.852 63.3969 199.923 63.4675C199.993 63.538 200.064 63.679 200.064 63.8201C200.064 63.9611 199.993 64.0316 199.923 64.1021C199.852 64.1727 199.782 64.2432 199.641 64.2432L200.064 64.9484H199.782L199.359 64.3137H199.147V64.9484H198.865V63.3264ZM199.147 64.0316H199.359C199.429 64.0316 199.429 64.0316 199.5 64.0316C199.57 64.0316 199.57 64.0316 199.641 64.0316L199.711 63.9611C199.711 63.9611 199.711 63.8906 199.711 63.8201C199.711 63.7495 199.711 63.7495 199.711 63.679L199.641 63.6085C199.57 63.6085 199.57 63.6085 199.5 63.6085C199.429 63.6085 199.429 63.6085 199.359 63.6085H199.147V64.0316Z" fill="#696A6E"/>
                  </svg>
                </a>
              </div>
              
              <div class="header__contact">
                <div class="header__location">${location}</div>
                <a href="tel:${phone.replace(/[^0-9]/g, '')}" class="header__phone">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
                  </svg>
                  ${phone}
                </a>
                <div class="header__links">
                  <a href="#location" class="header__link">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                      <circle cx="12" cy="10" r="3"/>
                    </svg>
                    Change Location
                  </a>
                  <span class="header__separator">|</span>
                  <a href="#contact" class="header__link">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                    </svg>
                    Get Contact Info
                    <img src="assets/images/imgi_22_icon-arrow-left.svg" alt="" class="header__contact-arrow" style="margin-left: 4px;">
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Main Navigation -->
        <div class="header__main">
          <div class="container">
            <div class="header__main-inner">
              <!-- Desktop Navigation -->
              <nav class="nav" aria-label="Main navigation">
                <ul class="nav__list">
                  ${navItems.map(item => `
                    <li><a href="${item.href}" class="nav__link">${item.text}</a></li>
                  `).join('')}
                </ul>
              </nav>
              
              <div class="header__actions">
                <a href="${ctaHref}" class="btn btn--header">
                  ${ctaText}
                </a>
                <button class="header__search" aria-label="Search">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"/>
                    <path d="m21 21-4.35-4.35"/>
                  </svg>
                </button>
              </div>
              
              <!-- Mobile Layout -->
              <div class="header__mobile-top">
                <a href="/" class="header__mobile-logo" aria-label="${logoText} Home">
                  <svg width="140" height="52" viewBox="0 0 201 75" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M33.9902 24.2587H9.02637V0.634674H38.2214V20.0275C38.1509 22.3547 36.2469 24.2587 33.9902 24.2587Z" fill="#4A7D92"/>
                    <path d="M38.1509 52.9601H9.02637V28.2783H34.2723C36.4584 28.2783 38.2214 30.0413 38.2214 32.2274V52.9601H38.1509Z" fill="#4A7D92"/>
                    <path d="M4.72469 0.634674H0.705078V52.9601H4.72469V0.634674Z" fill="#4A7D92"/>
                    <path d="M69.4613 16.7837C69.4613 20.0981 67.4162 23.0599 62.1978 23.0599H50.7031V0.634766H61.8452C66.9931 0.634766 68.8971 3.45554 68.8971 6.41736C68.8971 8.67398 67.6278 10.719 65.1596 11.3537C67.9804 11.9179 69.4613 13.8924 69.4613 16.7837ZM54.7227 3.80814V10.0844H61.0695C64.1018 10.0844 64.7365 8.46242 64.7365 6.911C64.7365 5.43009 63.9608 3.87866 61.0695 3.87866H54.7227V3.80814ZM65.3712 16.4311C65.3712 14.5271 64.2429 13.1167 61.6336 13.1167H54.7932V19.8161H61.4926C64.2429 19.8866 65.3712 18.4057 65.3712 16.4311Z" fill="#4A7D92"/>
                    <path d="M76.3018 0.634674V13.9628C76.3018 17.5593 78.4174 20.098 82.2255 20.098C85.963 20.098 88.1491 17.5593 88.1491 13.9628V0.634674H92.1687V14.2449C92.1687 19.816 88.5722 23.6945 82.2255 23.6945C75.8787 23.6945 72.2822 19.816 72.2822 14.2449V0.634674H76.3018Z" fill="#4A7D92"/>
                    <path d="M95.6953 0.634766H105.356C112.126 0.634766 116.569 4.79541 116.569 11.6358C116.569 18.4762 112.056 23.0599 105.356 23.0599H95.7658V0.634766H95.6953ZM105.074 19.7455C109.658 19.7455 112.267 16.4311 112.267 11.6358C112.267 6.84048 109.517 3.87866 104.933 3.87866H99.6444V19.675H105.074V19.7455Z" fill="#4A7D92"/>
                    <path d="M119.601 11.9178C119.601 4.93636 123.973 0 131.166 0C137.16 0 140.545 3.38493 141.391 7.05194L137.301 7.82766C136.737 5.50052 134.762 3.38493 131.095 3.38493C126.511 3.38493 123.761 6.76987 123.761 11.9178C123.761 16.9247 126.441 20.3801 131.095 20.3801C135.75 20.3801 137.795 17.1362 137.865 14.527V14.2449H130.813V11.0716H141.532V23.1304H138.218V19.4634C136.948 22.0021 134.198 23.765 130.249 23.765C123.691 23.6945 119.601 18.8287 119.601 11.9178Z" fill="#4A7D92"/>
                    <path d="M162.054 19.7454V23.0599H145.411V0.634674H161.842V3.94909H149.431V10.0138H161.349V13.1871H149.431V19.7454H162.054Z" fill="#4A7D92"/>
                    <path d="M185.043 4.09013H177.427V23.0599H173.478V4.09013H165.791V0.634674H185.043V4.09013Z" fill="#4A7D92"/>
                    <path d="M69.4613 46.6839C69.4613 49.9983 67.4162 52.9601 62.1978 52.9601H50.7031V30.5349H61.8452C66.9931 30.5349 68.8971 33.3557 68.8971 36.3175C68.8971 38.5741 67.6278 40.6192 65.1596 41.2539C67.9804 41.818 69.4613 43.7926 69.4613 46.6839ZM54.7227 33.7788V40.055H61.0695C64.1018 40.055 64.7365 38.4331 64.7365 36.8817C64.7365 35.4008 63.9608 33.8493 61.0695 33.8493H54.7227V33.7788ZM65.3712 46.3313C65.3712 44.4272 64.2429 43.0169 61.6336 43.0169H54.7932V49.7162H61.4926C64.2429 49.7867 65.3712 48.3058 65.3712 46.3313Z" fill="#4A7D92"/>
                    <path d="M72.917 30.5349H76.9366V49.4341H88.6428V52.9601H72.917V30.5349Z" fill="#4A7D92"/>
                    <path d="M96.1182 30.5349H92.0986V52.9601H96.1182V30.5349Z" fill="#4A7D92"/>
                    <path d="M100.49 30.5349H105.074L115.229 45.344C115.793 46.2607 116.287 47.107 116.639 47.9532H116.71C116.71 47.0365 116.71 46.1197 116.71 45.0619V30.5349H120.377V52.9601H116.005L105.638 38.01C105.074 37.0932 104.58 36.247 104.298 35.4713H104.228C104.228 36.3175 104.228 37.2343 104.228 38.3626V53.0306H100.561V30.5349H100.49Z" fill="#4A7D92"/>
                    <path d="M124.679 30.5349H134.34C141.11 30.5349 145.552 34.6956 145.552 41.5359C145.552 48.3763 141.039 52.9601 134.34 52.9601H124.749V30.5349H124.679ZM134.058 49.6457C138.642 49.6457 141.251 46.3313 141.251 41.5359C141.251 36.7406 138.501 33.7788 133.917 33.7788H128.628V49.5752H134.058V49.6457Z" fill="#4A7D92"/>
                    <path d="M147.456 47.107L150.841 45.485C151.899 48.3058 154.226 50.2804 158.175 50.2804C161.348 50.2804 163.323 49.2931 163.323 46.966C163.323 44.8504 162.054 44.0746 159.374 43.6515L154.931 43.0169C150.982 42.3822 148.725 40.4076 148.725 36.5996C148.725 32.5095 152.04 29.9708 157.681 29.9708C162.477 29.9708 165.932 31.8043 167.343 35.6123L164.169 37.3753C163.182 34.6956 160.996 33.2147 157.47 33.2147C154.437 33.2147 152.674 34.343 152.674 36.247C152.674 38.0805 153.732 38.9267 156.412 39.4204L160.784 40.1256C165.086 40.8308 167.413 42.5937 167.413 46.5428C167.413 50.774 164.169 53.5948 158.104 53.5948C152.322 53.5948 148.725 51.1266 147.456 47.107Z" fill="#4A7D92"/>
                  </svg>
                </a>
                <div class="header__mobile-actions">
                  <button class="header__mobile-search" aria-label="Search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="11" cy="11" r="8"/>
                      <path d="m21 21-4.35-4.35"/>
                    </svg>
                  </button>
                  <button class="menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
                    <span class="menu-toggle__bar"></span>
                    <span class="menu-toggle__bar"></span>
                    <span class="menu-toggle__bar"></span>
                  </button>
                </div>
              </div>
              
              <div class="header__mobile-bottom">
                <div class="header__mobile-location">
                  <div class="header__mobile-location-wrapper">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                      <circle cx="12" cy="10" r="3"/>
                    </svg>
                    <span class="header__mobile-location-text">${location}</span>
                  </div>
                  <div class="header__mobile-links">
                    <a href="#location" class="header__mobile-link">Change Location</a>
                    <span class="header__separator">|</span>
                    <a href="#contact" class="header__mobile-link">Get Contact Info
                      <img src="assets/images/imgi_22_icon-arrow-left.svg" alt="" class="header__contact-arrow" style="margin-left: 4px;">
                    </a>
                  </div>
                </div>
                <a href="tel:${phone.replace(/[^0-9]/g, '')}" class="header__mobile-phone" aria-label="Call ${phone}">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Mobile Navigation -->
        <nav class="mobile-nav" aria-label="Mobile navigation">
          <div class="container">
            <ul class="mobile-nav__list">
              ${navItems.map(item => `
                <li class="mobile-nav__item">
                  <a href="${item.href}" class="mobile-nav__link">${item.text}</a>
                </li>
              `).join('')}
            </ul>
              <div class="mobile-nav__cta">
                <a href="${ctaHref}" class="btn" style="display: flex; width: 100%; justify-content: center;">
                  ${ctaText}
                  <img src="assets/images/Icons-rightarrow-carat.svg" alt="" class="btn__icon">
                </a>
              </div>
          </div>
        </nav>
      </header>
    `;
    
    this.setupEventListeners();
  }
  
  getNavItems() {
    // Check if nav items are provided as child elements
    const navSlot = this.querySelector('nav-items');
    if (navSlot) {
      const items = [];
      navSlot.querySelectorAll('a').forEach(link => {
        items.push({
          text: link.textContent,
          href: link.getAttribute('href')
        });
      });
      navSlot.remove(); // Remove the placeholder
      return items;
    }
    
    // Default nav items
    return [
      { text: 'Products', href: '#products' },
      { text: 'Inspiration', href: '#inspiration' },
      { text: 'Smart Home', href: '#smart-home' },
      { text: 'About', href: '#about' },
      { text: 'Contact', href: '#contact' }
    ];
  }
  
  setupEventListeners() {
    const menuToggle = this.querySelector('.menu-toggle');
    const mobileNav = this.querySelector('.mobile-nav');
    
    if (menuToggle && mobileNav) {
      menuToggle.addEventListener('click', () => {
        this.mobileMenuOpen = !this.mobileMenuOpen;
        menuToggle.classList.toggle('open');
        mobileNav.classList.toggle('open');
        menuToggle.setAttribute('aria-expanded', this.mobileMenuOpen);
      });
      
      // Close mobile menu when a link is clicked
      const mobileNavLinks = mobileNav.querySelectorAll('a');
      mobileNavLinks.forEach(link => {
        link.addEventListener('click', () => {
          this.mobileMenuOpen = false;
          menuToggle.classList.remove('open');
          mobileNav.classList.remove('open');
          menuToggle.setAttribute('aria-expanded', 'false');
        });
      });
    }
  }
}

customElements.define('bb-header', BBHeader);

// =============================
// <bb-card> Component
// =============================
class BBCard extends HTMLElement {
  connectedCallback() {
    const image = this.getAttribute('image') || '';
    const imageAlt = this.getAttribute('image-alt') || '';
    const title = this.getAttribute('title') || '';
    const description = this.getAttribute('description') || '';
    const href = this.getAttribute('href') || '#';
    const buttonText = this.getAttribute('button-text') || 'View Details';
    const showButton = this.getAttribute('show-button') !== 'false';
    
    // Check if there's custom content in the slot
    const customContent = this.innerHTML.trim();
    
    if (customContent) {
      // Wrap custom content in card structure
      const content = this.innerHTML;
      this.innerHTML = `
        <div class="card">
          ${content}
        </div>
      `;
    } else {
      // Use props to build standard card
      this.innerHTML = `
        <div class="card${this.hasAttribute('product') ? ' product-card' : ''}">
          ${image ? `
            <div class="card__image">
              <img src="${image}" alt="${imageAlt}">
            </div>
          ` : ''}
          ${title ? `<h3>${title}</h3>` : ''}
          ${description ? `<p>${description}</p>` : ''}
          ${showButton && href ? `
            <a href="${href}" class="btn btn--secondary">${buttonText}</a>
          ` : ''}
        </div>
      `;
    }
  }
}

customElements.define('bb-card', BBCard);

// =============================
// <bb-text-section> Component
// =============================
class BBTextSection extends HTMLElement {
  connectedCallback() {
    const title = this.getAttribute('title') || '';
    const content = this.getAttribute('content') || '';
    
    // Check if there's custom content in slots
    const titleSlot = this.querySelector('[slot="title"]');
    const contentSlot = this.querySelector('[slot="content"]');
    
    const titleText = titleSlot ? titleSlot.innerHTML : title;
    const contentText = contentSlot ? contentSlot.innerHTML : `<p>${content}</p>`;
    
    this.innerHTML = `
      <div class="text-section">
        <div class="container">
          <div class="text-section__content">
            ${titleText ? `<h2 class="text-section__title">${titleText}</h2>` : ''}
            <div class="text-section__body">${contentText}</div>
          </div>
        </div>
      </div>
    `;
  }
}

customElements.define('bb-text-section', BBTextSection);

// =============================
// <bb-accordion> Component
// =============================
class BBAccordion extends HTMLElement {
  constructor() {
    super();
    this.isOpen = false;
  }

  connectedCallback() {
    const question = this.getAttribute('question') || this.querySelector('[slot="question"]')?.textContent || '';
    const answer = this.getAttribute('answer') || this.querySelector('[slot="answer"]')?.innerHTML || '';
    
    this.innerHTML = `
      <div class="accordion">
        <button class="accordion__button" aria-expanded="false">
          <span>${question}</span>
          <span class="accordion__icon">+</span>
        </button>
        <div class="accordion__panel">
          ${answer}
        </div>
      </div>
    `;
    
    this.setupEventListeners();
  }
  
  setupEventListeners() {
    const button = this.querySelector('.accordion__button');
    const panel = this.querySelector('.accordion__panel');
    
    if (button && panel) {
      button.addEventListener('click', () => {
        // Close all other accordions in the same container
        const parent = this.closest('.faq-list') || this.parentElement;
        if (parent) {
          parent.querySelectorAll('bb-accordion').forEach(accordion => {
            if (accordion !== this) {
              accordion.close();
            }
          });
        }
        
        this.toggle();
      });
    }
  }
  
  toggle() {
    this.isOpen = !this.isOpen;
    const button = this.querySelector('.accordion__button');
    const panel = this.querySelector('.accordion__panel');
    
    if (this.isOpen) {
      button.classList.add('active');
      panel.classList.add('open');
      button.setAttribute('aria-expanded', 'true');
    } else {
      button.classList.remove('active');
      panel.classList.remove('open');
      button.setAttribute('aria-expanded', 'false');
    }
  }
  
  close() {
    if (this.isOpen) {
      this.isOpen = false;
      const button = this.querySelector('.accordion__button');
      const panel = this.querySelector('.accordion__panel');
      button.classList.remove('active');
      panel.classList.remove('open');
      button.setAttribute('aria-expanded', 'false');
    }
  }
}

customElements.define('bb-accordion', BBAccordion);

// =============================
// <bb-testimonials> Component
// =============================
class BBTestimonials extends HTMLElement {
  constructor() {
    super();
    this.currentIndex = 0;
    this.autoRotateInterval = null;
  }

  async connectedCallback() {
    // Load testimonials from data-src or use inline items
    const dataSrc = this.getAttribute('data-src');
    let testimonials = [];
    
    if (dataSrc) {
      try {
        const response = await fetch(dataSrc);
        testimonials = await response.json();
      } catch (error) {
        console.error('Error loading testimonials:', error);
        testimonials = this.getInlineTestimonials();
      }
    } else {
      testimonials = this.getInlineTestimonials();
    }
    
    this.render(testimonials);
    this.setupEventListeners();
    this.startAutoRotate();
  }
  
  disconnectedCallback() {
    this.stopAutoRotate();
  }
  
  getInlineTestimonials() {
    const items = [];
    this.querySelectorAll('li').forEach(li => {
      const stars = li.getAttribute('stars') || '5';
      const text = li.querySelector('.text')?.textContent || li.textContent;
      const author = li.querySelector('.author')?.textContent || li.getAttribute('author') || '';
      
      items.push({ stars, text, author });
    });
    return items;
  }
  
  render(testimonials) {
    this.testimonials = testimonials;
    
    this.innerHTML = `
      <div class="testimonials">
        <div class="testimonials__slider">
          <div class="testimonials__track">
            ${testimonials.map(t => `
              <div class="testimonial card">
                <div class="testimonial__stars" aria-label="${t.stars} out of 5 stars">
                  ${'★'.repeat(parseInt(t.stars))}
                </div>
                <p class="testimonial__text">${t.text}</p>
                <p class="testimonial__author">${t.author}</p>
              </div>
            `).join('')}
          </div>
        </div>
        
        <div class="testimonials__controls">
          <button class="testimonials__btn" aria-label="Previous testimonial" data-direction="prev">‹</button>
          <button class="testimonials__btn" aria-label="Next testimonial" data-direction="next">›</button>
        </div>
      </div>
    `;
  }
  
  setupEventListeners() {
    const track = this.querySelector('.testimonials__track');
    const prevBtn = this.querySelector('[data-direction="prev"]');
    const nextBtn = this.querySelector('[data-direction="next"]');
    
    if (prevBtn && nextBtn) {
      prevBtn.addEventListener('click', () => {
        this.prev();
        this.stopAutoRotate();
        setTimeout(() => this.startAutoRotate(), 10000);
      });
      
      nextBtn.addEventListener('click', () => {
        this.next();
        this.stopAutoRotate();
        setTimeout(() => this.startAutoRotate(), 10000);
      });
    }
    
    if (track) {
      track.addEventListener('mouseenter', () => this.stopAutoRotate());
      track.addEventListener('mouseleave', () => this.startAutoRotate());
    }
    
    // Update on resize
    window.addEventListener('resize', () => this.updateSlider());
    
    // Initial update
    this.updateSlider();
  }
  
  getVisibleCount() {
    const width = window.innerWidth;
    if (width >= 1024) return 3;
    if (width >= 768) return 2;
    return 1;
  }
  
  updateSlider() {
    const track = this.querySelector('.testimonials__track');
    const testimonials = this.querySelectorAll('.testimonial');
    const prevBtn = this.querySelector('[data-direction="prev"]');
    const nextBtn = this.querySelector('[data-direction="next"]');
    
    if (!track || !testimonials.length) return;
    
    const visibleCount = this.getVisibleCount();
    const maxIndex = Math.max(0, testimonials.length - visibleCount);
    
    this.currentIndex = Math.min(this.currentIndex, maxIndex);
    this.currentIndex = Math.max(this.currentIndex, 0);
    
    const testimonialWidth = testimonials[0].offsetWidth;
    const gap = 24;
    const offset = this.currentIndex * (testimonialWidth + gap);
    
    track.style.transform = `translateX(-${offset}px)`;
    
    if (prevBtn && nextBtn) {
      prevBtn.disabled = this.currentIndex === 0;
      nextBtn.disabled = this.currentIndex >= maxIndex;
      prevBtn.style.opacity = this.currentIndex === 0 ? '0.5' : '1';
      nextBtn.style.opacity = this.currentIndex >= maxIndex ? '0.5' : '1';
    }
  }
  
  prev() {
    if (this.currentIndex > 0) {
      this.currentIndex--;
      this.updateSlider();
    }
  }
  
  next() {
    const visibleCount = this.getVisibleCount();
    const maxIndex = this.testimonials.length - visibleCount;
    if (this.currentIndex < maxIndex) {
      this.currentIndex++;
      this.updateSlider();
    }
  }
  
  startAutoRotate() {
    this.stopAutoRotate();
    this.autoRotateInterval = setInterval(() => {
      const visibleCount = this.getVisibleCount();
      const maxIndex = this.testimonials.length - visibleCount;
      
      if (this.currentIndex < maxIndex) {
        this.currentIndex++;
      } else {
        this.currentIndex = 0;
      }
      this.updateSlider();
    }, 5000);
  }
  
  stopAutoRotate() {
    if (this.autoRotateInterval) {
      clearInterval(this.autoRotateInterval);
      this.autoRotateInterval = null;
    }
  }
}

customElements.define('bb-testimonials', BBTestimonials);

// =============================
// Feature Accordion Hero
// =============================
class FeatureAccordionHero {
  constructor() {
    this.hero = document.querySelector('.feature-hero');
    if (!this.hero) return;
    
    this.accordionItems = document.querySelectorAll('.feature-accordion-item');
    this.backgrounds = document.querySelectorAll('.feature-hero__bg');
    this.activeFeature = null;
    this.prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    
    this.init();
  }
  
  init() {
    // Preload all images
    this.preloadImages();
    
    // Setup accordion click handlers
    this.accordionItems.forEach((item, index) => {
      const button = item.querySelector('.feature-accordion-item__header');
      const content = item.querySelector('.feature-accordion-item__content');
      const featureNumber = item.getAttribute('data-feature');
      
      button.addEventListener('click', () => {
        this.handleAccordionClick(item, button, content, featureNumber);
      });
    });
  }
  
  preloadImages() {
    const isMobile = window.matchMedia('(max-width: 767px)').matches;

    this.backgrounds.forEach((bg, index) => {
      const imageNumber = index + 1;
      const desktopImage = bg.dataset.desktopImage;
      const mobileImage = bg.dataset.mobileImage;

      const targetImage = isMobile && mobileImage ? mobileImage : desktopImage;

      if (targetImage) {
        bg.style.backgroundImage = `url('${targetImage}')`;

        const img = new Image();
        img.src = targetImage;
      }
    });
  }
  
  handleAccordionClick(item, button, content, featureNumber) {
    const isOpen = button.getAttribute('aria-expanded') === 'true';
    
    if (isOpen) {
      // Collapse the current item
      this.collapseItem(button, content);
      this.resetBackground();
      this.activeFeature = null;
    } else {
      // Close all other items first
      this.closeAllItems();
      
      // Expand the clicked item
      this.expandItem(button, content);
      this.changeBackground(featureNumber);
      this.activeFeature = featureNumber;
    }
  }
  
  expandItem(button, content) {
    button.setAttribute('aria-expanded', 'true');
    content.classList.add('open');
  }
  
  collapseItem(button, content) {
    button.setAttribute('aria-expanded', 'false');
    content.classList.remove('open');
  }
  
  closeAllItems() {
    this.accordionItems.forEach(item => {
      const button = item.querySelector('.feature-accordion-item__header');
      const content = item.querySelector('.feature-accordion-item__content');
      this.collapseItem(button, content);
    });
  }
  
  changeBackground(featureNumber) {
    // Remove active class from all backgrounds
    this.backgrounds.forEach(bg => {
      bg.classList.remove('active');
    });
    
    // Add active class to the selected background
    const targetBg = document.querySelector(`.feature-hero__bg[data-image="${featureNumber}"]`);
    if (targetBg) {
      if (targetBg.dataset.desktopImage && targetBg.style.backgroundImage === '') {
        targetBg.style.backgroundImage = `url('${targetBg.dataset.desktopImage}')`;
      }
      targetBg.classList.add('active');
    }
  }
  
  resetBackground() {
    // Reset to first background when all are collapsed
    this.backgrounds.forEach(bg => {
      bg.classList.remove('active');
    });
    
    const firstBg = document.querySelector('.feature-hero__bg[data-image="1"]');
    if (firstBg) {
      if (firstBg.dataset.desktopImage && firstBg.style.backgroundImage === '') {
        firstBg.style.backgroundImage = `url('${firstBg.dataset.desktopImage}')`;
      }
      firstBg.classList.add('active');
    }
  }
}

// Initialize Feature Accordion Hero when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  new FeatureAccordionHero();
})

// =============================
// Features Include Interactive
// =============================
class FeaturesInclude {
  constructor() {
    this.currentIndex = 0;
    this.autoRotateInterval = null;
    this.isTransitioning = false;
    this.isPaused = false;
    this.rotationDuration = 8000;
    
    this.features = [
      {
        media: 'assets/videos/shades-hero-video.mp4',
        mediaType: 'video',
        alt: 'Motorized shades demonstration video'
      },
      {
        media: 'assets/images/img-2.png',
        mediaType: 'image',
        alt: 'One-touch remote control for motorized shades'
      },
      {
        media: 'assets/images/img-3.png',
        mediaType: 'image',
        alt: 'Mobile app control for motorized shades'
      },
      {
        media: 'assets/images/img-4.png',
        mediaType: 'image',
        alt: 'Wand control for motorized shades'
      }
    ];
    
    this.mediaEl = document.getElementById('active-feature-media');
    this.mediaContainer = this.mediaEl ? this.mediaEl.parentElement : null;
    this.buttons = document.querySelectorAll('.features-include__item');
    this.playPauseBtn = document.querySelector('.features-include__play-pause');
    this.pauseIcon = document.querySelector('.features-include__pause-icon');
    this.playIcon = document.querySelector('.features-include__play-icon');
    this.progressRingFill = document.querySelector('.features-include__progress-ring-fill');
    this.progressCircumference = this.progressRingFill
      ? 2 * Math.PI * parseFloat(this.progressRingFill.getAttribute('r') || 0)
      : 0;
    
    if (!this.mediaEl) return;
    
    this.init();
  }
  
  init() {
    // Preload images
    this.preloadImages();
    
    // Setup click handlers for feature buttons
    this.buttons.forEach((button, index) => {
      button.addEventListener('click', () => {
        if (this.isTransitioning) return;
        this.switchToFeature(index);
        if (!this.isPaused) {
          this.stopAutoRotate();
          this.startAutoRotate();
        }
      });
    });
    
    // Setup play/pause button
    if (this.playPauseBtn) {
      this.playPauseBtn.addEventListener('click', () => {
        this.togglePlayPause();
      });
    }
    
    // Start auto-rotation
    this.startAutoRotate();
  }
  
  preloadImages() {
    this.features.forEach(feature => {
      if (feature.mediaType === 'image') {
        const img = new Image();
        img.src = feature.media;
      }
    });
  }
  
  switchToFeature(index) {
    if (index === this.currentIndex || this.isTransitioning) return;
    
    this.isTransitioning = true;
    const feature = this.features[index];
    
    // Close all descriptions first
    const allDescriptions = document.querySelectorAll('.features-include__item-description');
    allDescriptions.forEach(desc => desc.classList.remove('open'));
    
    // Update button states
    this.buttons.forEach((btn, i) => {
      btn.classList.remove('active');
      btn.setAttribute('aria-expanded', 'false');
    });
    
    // Remove active class from current media (fade out)
    const currentMedia = this.mediaContainer.querySelector('.active');
    if (currentMedia) {
      currentMedia.classList.remove('active');
    }
    
    // Create and add new media element
    const newMediaEl = this.createMediaElement(feature);
    this.mediaContainer.appendChild(newMediaEl);
    
    // Force reflow to ensure transition works
    newMediaEl.offsetHeight;
    
    // Fade in new media
    requestAnimationFrame(() => {
      newMediaEl.classList.add('active');
    });
    
    // Small delay then activate new button and open description
    setTimeout(() => {
      this.buttons[index].classList.add('active');
      this.buttons[index].setAttribute('aria-expanded', 'true');
      
      const selectedDescription = this.buttons[index].nextElementSibling;
      if (selectedDescription) {
        selectedDescription.classList.add('open');
      }
      
      this.currentIndex = index;
      this.isTransitioning = false;
    }, 100);
    
    // Clean up old media after transition completes
    setTimeout(() => {
      const oldMedia = this.mediaContainer.querySelectorAll('img, video');
      oldMedia.forEach((el, i) => {
        if (i < oldMedia.length - 1) { // Keep only the last (newest) element
          el.remove();
        }
      });
    }, 450);
  }
  
  createMediaElement(feature) {
    if (feature.mediaType === 'video') {
      const video = document.createElement('video');
      video.id = 'active-feature-media';
      video.autoplay = true;
      video.muted = true;
      video.loop = true;
      video.playsInline = true;
      video.setAttribute('aria-label', feature.alt);
      
      const source = document.createElement('source');
      source.src = feature.media;
      source.type = 'video/mp4';
      video.appendChild(source);
      
      return video;
    } else {
      const img = document.createElement('img');
      img.id = 'active-feature-media';
      img.src = feature.media;
      img.alt = feature.alt;
      img.loading = 'lazy';
      
      return img;
    }
  }

  startProgressRing() {
    if (!this.playPauseBtn || !this.progressRingFill) return;

    const circumference = this.progressCircumference || 0;

    this.playPauseBtn.classList.remove('playing');
    this.progressRingFill.style.animation = 'none';

    if (circumference > 0) {
      this.progressRingFill.style.strokeDasharray = `${circumference}`;
      this.progressRingFill.style.strokeDashoffset = `${circumference}`;
    }

    void this.progressRingFill.offsetWidth;

    this.progressRingFill.style.animation = '';
    requestAnimationFrame(() => {
      this.playPauseBtn.classList.add('playing');
    });
  }

  freezeProgressRing() {
    if (!this.playPauseBtn || !this.progressRingFill) return;

    const computedOffset = parseFloat(getComputedStyle(this.progressRingFill).strokeDashoffset) || 0;

    this.playPauseBtn.classList.remove('playing');
    this.progressRingFill.style.animation = 'none';
    this.progressRingFill.style.strokeDashoffset = `${computedOffset}`;
  }
  
  startAutoRotate() {
    this.stopAutoRotate();

    this.startProgressRing();
    
    this.autoRotateInterval = setInterval(() => {
      const nextIndex = (this.currentIndex + 1) % this.features.length;
      this.startProgressRing();
      this.switchToFeature(nextIndex);
    }, this.rotationDuration); // Rotate every 8 seconds
  }
  
  stopAutoRotate() {
    if (this.autoRotateInterval) {
      clearInterval(this.autoRotateInterval);
      this.autoRotateInterval = null;
    }
    
    this.freezeProgressRing();
  }
  
  togglePlayPause() {
    this.isPaused = !this.isPaused;
    
    if (this.isPaused) {
      // Pause
      this.stopAutoRotate();
      this.pauseIcon.style.display = 'none';
      this.playIcon.style.display = 'block';
      this.playPauseBtn.setAttribute('aria-label', 'Play automatic rotation');
    } else {
      // Play
      this.startAutoRotate();
      this.pauseIcon.style.display = 'block';
      this.playIcon.style.display = 'none';
      this.playPauseBtn.setAttribute('aria-label', 'Pause automatic rotation');
    }
  }
}

// Initialize Features Include when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  new FeaturesInclude();
})

// =============================
// Smooth Scroll Helper
// =============================
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      
      if (href === '#' || !document.querySelector(href)) {
        return;
      }
      
      e.preventDefault();
      
      const target = document.querySelector(href);
      if (target) {
        const headerOffset = 80;
        const elementPosition = target.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
        
        window.scrollTo({
          top: offsetPosition,
          behavior: 'smooth'
        });
      }
    });
  });
  
  // Newsletter form handler
  const newsletterForm = document.querySelector('.footer__form');
  if (newsletterForm) {
    newsletterForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const emailInput = this.querySelector('input[type="email"]');
      const zipInput = this.querySelector('input[type="text"]');
      
      if (emailInput.value && zipInput.value) {
        alert('Thank you for subscribing! We\'ll send design inspiration and exclusive offers to ' + emailInput.value);
        emailInput.value = '';
        zipInput.value = '';
      }
    });
  }
});


